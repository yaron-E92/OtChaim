<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:OtChaim.Presentation.MAUI.ViewModels.Tool"
             x:Class="OtChaim.Presentation.MAUI.Pages.Tool.EmergencyPage"
             x:DataType="viewModels:EmergencyViewModel"
             BackgroundColor="{StaticResource Gray100}">

    <Grid RowDefinitions="Auto,*" ColumnDefinitions="*">
        <!-- Header -->
        <VerticalStackLayout Grid.Row="0" Padding="20,20,20,10" Spacing="8">
            <Label Text="Emergency" Style="{StaticResource PrimaryHeadline}" />
        </VerticalStackLayout>

        <!-- Main Content -->
        <VerticalStackLayout Grid.Row="1" Padding="20" Spacing="20" VerticalOptions="Center">
            
            <!-- Emergency Button -->
            <Button Text="ðŸš¨ EMERGENCY!" 
                    Command="{Binding TriggerEmergencyCommand}"
                    Style="{StaticResource EmergencyButton}"
                    HeightRequest="80"
                    FontSize="24"
                    Margin="20,40,20,20" />
            
            <Label Text="Tap the button above to create a new emergency with all options" 
                   Style="{StaticResource SecondaryHeadline}"
                   HorizontalOptions="Center"
                   HorizontalTextAlignment="Center"
                   Margin="20,0,20,20" />

        </VerticalStackLayout>

        <!-- Popup Overlay for Create Emergency -->
        <ContentView IsVisible="{Binding IsCreatePopupVisible}" 
                     BackgroundColor="#80000000" 
                     Grid.Row="0" Grid.RowSpan="2" Grid.Column="0"
                     ZIndex="1000">
            <ContentView Content="{Binding EmergencyCreationPopup}" 
                         VerticalOptions="Center" 
                         HorizontalOptions="Center" 
                         WidthRequest="500"
                         HeightRequest="600"
                         Margin="20" />
        </ContentView>

        <!-- Loading Overlay -->
        <Grid Grid.Row="0" Grid.RowSpan="2" 
              BackgroundColor="Black" Opacity="0.5"
              IsVisible="{Binding IsLoading}">
            <ActivityIndicator IsRunning="{Binding IsLoading}" 
                              Color="{StaticResource White}"
                              HorizontalOptions="Center"
                              VerticalOptions="Center" />
        </Grid>



    </Grid>

</ContentView>
