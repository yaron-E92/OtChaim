<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:OtChaim.Presentation.MAUI.ViewModels.Tool"
             x:Class="OtChaim.Presentation.MAUI.Pages.Tool.EmergencyPage"
             x:DataType="viewModels:EmergencyViewModel"
             BackgroundColor="{StaticResource Secondary}">

    <Grid RowDefinitions="10%,80%,10%" ColumnDefinitions="2.5%,95%,2.5%">
        <!-- Main White Panel -->
        <Frame Grid.Row="1" Grid.Column="1" BackgroundColor="{StaticResource White}" CornerRadius="20" Padding="10">
                <Frame BackgroundColor="{StaticResource Gray100}" CornerRadius="20" Padding="10">
                    <VerticalStackLayout Spacing="10">

                        <!-- Sub-Navigation Bar -->
                        <Frame BackgroundColor="{StaticResource Secondary}"
                               CornerRadius="20"
                               HeightRequest="40"
                               Padding="0"
                               BorderColor="{StaticResource OffBlack}">
                            <Grid ColumnDefinitions="auto,*,auto">
                                <!-- Left Arrow -->
                                <Frame Grid.Column="0" BackgroundColor="{StaticResource Tertiary}"
                                       CornerRadius="20"
                                       WidthRequest="40" HeightRequest="40"
                                       Padding="0"
                                       BorderColor="Transparent">
                                    <Image Source="right_outlined_arrow.svg"
                                           WidthRequest="40"
                                           HeightRequest="40"
                                           Rotation="180"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center">
                                        <Image.GestureRecognizers>
                                            <TapGestureRecognizer Command="{Binding PreviousEmergencyTypeCommand}" />
                                        </Image.GestureRecognizers>
                                    </Image>
                                </Frame>
                                
                                <!-- Center Title -->
                                <Label Grid.Column="1" Text="{Binding SelectedEmergencyType}" FontSize="20" FontAttributes="Bold" TextColor="Black" HorizontalOptions="Center" VerticalOptions="Center" LineBreakMode="NoWrap" Margin="10,0" />
                                
                                <!-- Right Arrow -->
                                <Frame Grid.Column="2" BackgroundColor="{StaticResource Tertiary}"
                                       CornerRadius="20"
                                       WidthRequest="40"
                                       HeightRequest="40"
                                       Padding="0"
                                       BorderColor="Transparent">
                                    <Image Source="right_outlined_arrow.svg"
                                           WidthRequest="40"
                                           HeightRequest="40"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center">
                                        <Image.GestureRecognizers>
                                            <TapGestureRecognizer Command="{Binding NextEmergencyTypeCommand}" />
                                        </Image.GestureRecognizers>
                                    </Image>
                                </Frame>
                            </Grid>
                        </Frame>

                        <!-- Contact List Section -->
                        <Frame BackgroundColor="{StaticResource White}" CornerRadius="12" Padding="16">
                            <VerticalStackLayout Spacing="10">
                                <Label Text="List of contacts:" FontSize="18" FontFamily="OpenSansSemibold" />
                                <Label Text="Group Single / Email / SMS / Messenger" FontSize="16" TextColor="{StaticResource Gray600}" />
                            </VerticalStackLayout>
                        </Frame>

                        <!-- Attachment Buttons -->
                        <Grid ColumnDefinitions="*,*,*,*,*" ColumnSpacing="10">
                            <Button Grid.Column="0" Text="Pic" Command="{Binding AddPictureCommand}" Style="{StaticResource AttachmentButton}" />
                            <Button Grid.Column="1" Text="Pers Info" Command="{Binding AddPersonalInfoCommand}" Style="{StaticResource AttachmentButton}" />
                            <Button Grid.Column="2" Text="Med Info" Command="{Binding AddMedicalInfoCommand}" Style="{StaticResource AttachmentButton}" />
                            <Button Grid.Column="3" Text="GPS" Command="{Binding AddGpsCommand}" Style="{StaticResource AttachmentButton}" />
                            <Button Grid.Column="4" Text="Docu" Command="{Binding AddDocumentCommand}" Style="{StaticResource AttachmentButton}" />
                        </Grid>

                        <!-- Emergency Message -->
                        <Frame BackgroundColor="{StaticResource White}" CornerRadius="12" Padding="16">
                            <VerticalStackLayout Spacing="0">
                                <Label Text="Message:" FontSize="18" FontFamily="OpenSansSemibold" />
                                <Editor Text="{Binding EmergencyMessage}" Placeholder="Enter emergency message..." HeightRequest="80" FontSize="16" />
                            </VerticalStackLayout>
                        </Frame>

                       

                    </VerticalStackLayout>
                </Frame>
            </Frame>
        </Grid>
        
        <!-- Message Management Buttons -->
        <Grid Grid.Row="1" Grid.Column="1" ColumnDefinitions="Auto,Auto" ColumnSpacing="10" HorizontalOptions="End" VerticalOptions="End" Margin="0,0,20,20">
            <Frame Grid.Column="0" BackgroundColor="Red" CornerRadius="30" WidthRequest="60" HeightRequest="60" Padding="0" BorderColor="Transparent">
                <Button Text="-" TextColor="White" FontSize="20" FontAttributes="Bold" BackgroundColor="Transparent" BorderColor="Transparent" Command="{Binding RemoveMessageCommand}" HorizontalOptions="Center" VerticalOptions="Center" />
            </Frame>
            <Frame Grid.Column="1" BackgroundColor="Green" CornerRadius="30" WidthRequest="60" HeightRequest="60" Padding="0" BorderColor="Transparent">
                <Button Text="+" TextColor="White" FontSize="20" FontAttributes="Bold" BackgroundColor="Transparent" BorderColor="Transparent" Command="{Binding AddMessageCommand}" HorizontalOptions="Center" VerticalOptions="Center" />
            </Frame>
        </Grid>
        
        <!-- Large Emergency Button -->
        <Button Grid.Row="2" Grid.Column="1" Text="EMERGENCY!" Command="{Binding TriggerEmergencyCommand}" Style="{StaticResource EmergencyButton}" HorizontalOptions="Center" />

</ContentView>
